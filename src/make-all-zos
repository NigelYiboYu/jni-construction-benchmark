
pwd=`pwd`


# use lower version of java to compile
export JAVA=/jit/team/yunigel/sdk/bin/java
export JAVAC=/jit/team/yunigel/sdk/bin/javac
export JAVAH=/jit/team/yunigel/sdk/bin/javah


echo "javac all java files"
rm -f com/jni/consbench/*.class
$JAVAC com/jni/consbench/*.java
rm -f ./*.so


echo "Creating JNI header files with javah"
rm -f ./*.h

$JAVAH com.jni.consbench.FooByCall
$JAVAH com.jni.consbench.FooByCallStatic
$JAVAH com.jni.consbench.FooByCallInvoke



echo "Compiling C++ code into shared lib"
cd ../c++
./make-all-cpp-zos

cd $pwd
cp ../c++/*.so .
